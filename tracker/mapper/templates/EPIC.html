
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>
	EPIC
</title>
<link rel="stylesheet" href="/includes/css/style.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/slider.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/popup.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/multiview.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/videoDetail.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/ModelPopup.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/tabcontent.css" type="text/css" />
<link rel="stylesheet" href="/includes/css/master.css" type="text/css" />
<script type="text/javascript" src="/includes/js/tabcontent.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src='images/js/jquery.min.js' type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="images/css/base.css" />
    <link type="text/css" href="images/css/smoothness/jquery-ui-1.8.2.custom.css" rel="Stylesheet" />
    <script type="text/javascript" src="images/js/jquery-1.4.3.min.js"></script>
    <script type="text/javascript" src="images/js/jquery-ui-1.8.2.custom.min.js"></script>
    <script   type="text/javascript" src="images/js/jquery.dataTables.min.js"></script>
    
    <script type="text/javascript">
    //<![CDATA[
    var timerDelay= 30 // Change the refresh rate here in seconds
    var secs
	var timerID = null
	var timerRunning = false
	var delay = 1000
	var map=null;
	var infoWindow = new google.maps.InfoWindow;
	var listOfPins = '';
	var  markersArray=[];
    var customIcons = {
      old: {
        icon: 'images/blue.png',
        shadow: 'images/msmarker.shadow.png'
      },
      current: {
        icon: 'images/red-dot.png',
        shadow: 'images/msmarker.shadow.png'
      }
    };

    function updateList()
    	{
    		myText = document.getElementById("TheList");
    		myText.innerHTML=listOfPins;
    	}

    function load() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(25.18507, 55.291735),
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.HYBRID
      });
      
      pinnit( map, infoWindow);
      updateList();
      InitializeTimer();
      
    }
function pinnit( map, infoWindow) {
	downloadUrl("{%url tracker.kml.views.all_points%}", function(data) {
		listOfPins=''
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var icon = customIcons[type] || {};
          listOfPins += '<li><a href="javascript:map.setCenter(new google.maps.LatLng('
          + parseFloat(markers[i].getAttribute("lat")) +','+ parseFloat(markers[i].getAttribute("lng")) +
          '));showIW('+i+');"> <img src="'+ icon.icon+'">' + markers[i].getAttribute("name")+'</a></li>'; 
          var html = "<b>" + name + "</b> <br/>" + address;          
          
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          marker.id = i;
          bindInfoWindow(marker, map, infoWindow, html);
          markersArray.push(marker);

        }
        updateList();
     });

    InitializeTimer();
}
function showIW(iw){

    google.maps.event.trigger(markersArray[iw], "click");

}

// Removes the overlays from the map, but keeps them in the array

// Deletes all markers in the array by removing references to them
function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}
    


function InitializeTimer()
{
    // Set the length of the timer, in seconds
    secs = timerDelay
    StopTheClock()
    StartTheTimer()
}

function StopTheClock()
{
    if(timerRunning)
        clearTimeout(timerID)
    timerRunning = false
}

function StartTheTimer()
{
    if (secs==0)
    {
        StopTheClock();
        deleteOverlays();
       	pinnit( map, infoWindow);
       	updateList();
    }
    else
    {
        secs = secs - 1
        timerRunning = true
        timerID = self.setTimeout("StartTheTimer()", delay)
    }
}

//-->
//]]>
</script>
    
</head>
<body>
    <form name="aspnetForm" method="post" action="countries.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm">

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<div id="Wrap">
<div id="ctl00_ucFront1_UPnlSignIn">	
        <div id="Header">
            <div id="Logo">
                <a href="index.aspx" title="World Food Programme">
                    <img src="images/logo.gif" alt="World Food Programme" width="212" height="57" border="0"/></a>
            </div>
            <div class="EpicTop">
                <img src="images/epic-top.gif" alt="EPIC" width="269" height="36"/>
            </div>
            <div class="HeaderRight">
                <div class="SearchBg">
                    <div id="ctl00_ucFront1_pnlSearch" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_ucFront1_btnSearch')">
                        <div class="SearchBox">
                            <input name="ctl00$ucFront1$txtKeyword" type="text" id="ctl00_ucFront1_txtKeyword" class="Field" />
                            <input type="image" name="ctl00$ucFront1$btnSearch" id="ctl00_ucFront1_btnSearch" src="images/search-buttonm.gif" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ucFront1$btnSearch&quot;, &quot;&quot;, true, &quot;SiteSearch&quot;, &quot;&quot;, false, false))" style="border-width:0px;" />
                        </div>
               		</div>
                    <div class="Fleft">
                        <a href="index.aspx">Home</a> | <a href="sitemap.aspx">Sitemap</a> | <a href="contact.aspx">
                            Contact Us</a></div>
                    <a href="JavaScript:void(0);" id="ctl00_ucFront1_ankSignIn" onclick="JavaScript:ShowModalPopupSignIn()" class="SignIn">Sign In</a>
                    
                </div>
                <div class="Clr"></div>
                <a href="AdvancedSearch.aspx" class="AdSearch">
                    <img src="images/arrow-blue.gif" alt="" width="5" height="10"/>
                    Advanced Search</a>
                <span id="ctl00_ucFront1_RFVSearch" class="ValidationErrMsg" style="color:Red;display:none;">Please enter keyword.</span>
                
            </div>
        </div>
        <div id="DivSignIn" class="popLink">
            <div id="ctl00_ucFront1_PnlSignIn" class="popup NewEnquiryForm" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_ucFront1_btnSubmit')" style="display: none; color: #9F9D9D; width: 665px; padding: 0px;">
                <div class="LoginPopup" style="display: block;">
                    <img src="images/tl.png" width="665" height="9" alt="" /><div style="padding: 5px 20px"
                        class="content">
                        <table border="0" cellpadding="0" cellspacing="0" style="width: 100%">
                            <tr>
                                <td>
                                    <div style="text-align: right; vertical-align: top;">
                                        <a id="AnkSignInClose" class="cross" href="JavaScript:void(0);" onclick="JavaScript:HideModalPopupSignIn()">
                                            <img src="images/close.gif" alt="close" /></a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div id="ctl00_ucFront1_msg_div" align="center" class="ErrMess">
                                    </div>
                                    <div class="RegisForm Fleft" style="width: auto;">
                                        <table width="95%" class="ContactForm123" style="align: center" border="0" cellpadding="5"
                                            cellspacing="5">
                                            <tr>
                                                <td width="150px" align="right" valign="top">
                                                    <label>
                                                        <span class="red1">*</span> Email Address :</label>
                                                </td>
                                                <td>
                                                    <input name="ctl00$ucFront1$txtUserName" type="text" maxlength="100" id="ctl00_ucFront1_txtUserName" class="ConField" />
                                                    <br />
                                                    <span id="ctl00_ucFront1_rfvUserName" class="ValidationErrMsg" style="color:Red;display:none;">Please enter your email id !</span>
                                                    <span id="ctl00_ucFront1_REVEmail" style="color:Red;display:none;">Please enter a valid email id eg. xyz@abc.com !</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" valign="top">
                                                    <label>
                                                        <span class="red1">*</span> Password :</label>
                                                </td>
                                                <td>
                                                    <input name="ctl00$ucFront1$txtPassword" type="password" maxlength="25" id="ctl00_ucFront1_txtPassword" class="ConField" /><br />
                                                    <span id="ctl00_ucFront1_rfvPassword" class="ValidationErrMsg" style="color:Red;display:none;">Please enter your password !</span>
                                                </td>
                                            </tr>
                                            <tr id="ctl00_ucFront1_trRememberMe">
													<td align="right" valign="top">
                                                    	<label style="line-height: 10px;">Remember Me :</label>
                                                	</td>
                                                	<td id="ctl00_ucFront1_tdRememberMe" valign="top">
                                                		<input id="ctl00_ucFront1_chkRememberMe" type="checkbox" name="ctl00$ucFront1$chkRememberMe" />
                                                	</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <input type="submit" name="ctl00$ucFront1$btnSubmit" value="Submit" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ucFront1$btnSubmit&quot;, &quot;&quot;, true, &quot;SignIn&quot;, &quot;&quot;, false, false))" id="ctl00_ucFront1_btnSubmit" class="InputButton1" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <a href="Registration.aspx">Join Now</a> &nbsp; | &nbsp; <a href="ForgotPassword.aspx">
                                                        Forgot Password</a>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <img src="images/bl.png" width="665" height="9" alt="" /></div>
                <input type="submit" name="ctl00$ucFront1$btnSignIn" value="" id="ctl00_ucFront1_btnSignIn" style="display: none; position: absolute;" />  
			</div>
		</div>
</div>
        <!-- Header Part End Here -->
        <div id="InnerContainer">
            <div>
                <img src="images/container-top.gif" width="989" height="10" alt="EPIC"/></div>
            <div class="InnerContent">
                <!-- Inner Top Navigation Part Start Here -->
                <div id="InnerNavigation">
                    <ul>
                        <li>
                            <a id="ctl00_hypEpic" href="epic.aspx"><span>Epic</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypCountries" class="active" href="countries.aspx"><span>Countries</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypStore" href="appstore.aspx"><span>App Store</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypSupport" href="support-training.aspx"><span>Support &amp; Training</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypNews" href="News-Category-List.aspx"><span>News</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypPartners" href="partners.aspx"><span>Partners</span></a>
                        </li>
                        <li>
                            <a id="ctl00_hypAbout" href="about.aspx"><span>About</span></a>
                        </li>
                    </ul>
                    <div class="Clr">
                    </div>
                </div>
                <div id="ctl00_pnlProgress" class="popup" style="display: none;
                    width: 300px">
                    <div style="padding: 8px">
                        <table border="0" cellpadding="2" cellspacing="0" style="width: 100%">
                            <tbody>
                                <tr>
                                    <td style="width: 50%">
                                    </td>
                                    <td style="text-align: right">
                                        <img alt="" src="Images/indicator.gif" />
                                    </td>
                                    <td style="text-align: left; white-space: nowrap">
                                        <span style="font-size: larger">&nbsp; Loading, Please wait ....</span>
                                    </td>
                                    <td style="width: 50%">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                
</div>
                
                
                <!-- Inner Top Navigation Part End Here -->
                
    <div class="ContentSearch">
        <img height="32" width="31" alt="Search" src="images/search-icon.gif">
        <div class="ContentSearchBox">
            <div id="ctl00_ContentPlaceHolder1_pnlCountrySearch" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_ContentPlaceHolder1_btnSearch')">
	                <input name="ctl00$ContentPlaceHolder1$txtKeyword" type="text" maxlength="100" id="ctl00_ContentPlaceHolder1_txtKeyword" class="TextField1" style="padding: 5px 4px;" />
                <select name="ctl00$ContentPlaceHolder1$cmbCountry" id="ctl00_ContentPlaceHolder1_cmbCountry" class="TextField1">
		<option selected="selected" value="0">-Select Country-</option>
		<option value="1">Operation Map for Logistic officer</option>
		<option value="2">Saudi Arabia</option>
		<option value="9">Dummy Country Name</option>
		<option value="6">United Kingdom</option>

	</select>
    <input type="submit" name="ctl00$ContentPlaceHolder1$btnSearch" value="Search" id="ctl00_ContentPlaceHolder1_btnSearch" class="InputButton" />
            
</div>
        </div>
    </div>
    <div class="InnerContentPad">
        <!-- Breadcrumbs Start Here -->
        <div class="Breadcrumbs">
            <a href="index.aspx">home</a> &gt; Countries</div>
        <!-- Breadcrumbs End Here -->
        <h1>
            Countries</h1>
        <div class="InnerLeftContainer">
            <div class="Map">
                <div class="Heading">
                    Operation Map for Logistic officer
                </div>
                <div class="google-width">
   <div><img  src='images/epic_logo_small.jpg'/> - Assets Tracking</div>
<div style="clear:both;"></div>
   <div class='legend'">
    <ul>
    <li><img src='images/mm_20_red.png' /> Current</li>
    <li><img src='images/mm_20_blue.png' /> &lt;7 Days</li>
    </ul>
  	<ul id="TheList">
   	<li><a href="#x"><img src="images/red-dot.png"/> DEMO</a></li>
   </ul>
</div>   
   <div id="map" style="width: 750px; height: 600px;float:left"></div>
<div style="clear:both;"></div>
<div id="directions_canvas">
</div>
<div id="ctl00_ContentPlaceHolder1_GoogleMapForASPNet1_UpdatePanel1">
	
    <input type="hidden" name="ctl00$ContentPlaceHolder1$GoogleMapForASPNet1$hidEventName" id="ctl00_ContentPlaceHolder1_GoogleMapForASPNet1_hidEventName" />
    <input type="hidden" name="ctl00$ContentPlaceHolder1$GoogleMapForASPNet1$hidEventValue" id="ctl00_ContentPlaceHolder1_GoogleMapForASPNet1_hidEventValue" />

</div>

<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAHtG9biKlqymTKzNsTu6VKRSl6UcZPTNEaHXUbXVPExnG0RvmsBQDaIAHoi_M0grc3hHAxyIS7hNv1A"  type="text/javascript"></script>
<script language="JavaScript">

    //RaiseEvent('MovePushpin','pushpin2');
function RaiseEvent(pEventName,pEventValue)
{
    document.getElementById('ctl00_ContentPlaceHolder1_GoogleMapForASPNet1_hidEventName').value = pEventName;
    document.getElementById('ctl00_ContentPlaceHolder1_GoogleMapForASPNet1_hidEventValue').value = pEventValue;
    __doPostBack('UpdatePanel1','');
}

var map;
var trafficInfo = null;

//function fListeners()
//{
//    this.listeners = new Array();
//    this.getLength = function() { return this.listeners.length; };
//    this.pushValue = function(v) { this.listeners.push(v); }
//    this.getValue = function(i)  { return this.listeners[i]; }
//}
function fMarkers()
{
    this.markers = new Array();
    this.getLength = function() { return this.markers.length; };
    this.pushValue = function(v) { this.markers.push(v); }
    this.getValue = function(i)  { return this.markers[i]; }
    this.getLastValue = function()  { return this.markers[this.markers.length-1]; }
    this.getValueById = function(ID)  {
                                        var i;
                                        for(i=0;i<this.markers.length;i++)
                                        {
                                            if(this.markers[i].value==ID)
                                            {
                                               // alert('marker found : '+this.markers[i].value);
                                                return this.markers[i];
                                            }
                                        } 
                                        return null; 
                                      }
    this.removeValueById = function(ID)  {
                                        var i;
                                        for(i=0;i<this.markers.length;i++)
                                        {
                                            if(this.markers[i].value==ID)
                                            {
                                               // alert('marker found : '+this.markers[i].value);
                                                this.markers.splice(i,1);
                                                //alert('changed marker removed');

                                            }
                                        } 
                                        return null; 
                                      }
}

function fPolylines()
{
    this.polylines = new Array();
    this.polylinesID = new Array();
    this.getLength = function() { return this.polylines.length; };
    this.pushValue = function(v,ID) {  this.polylines.push(v); this.polylinesID.push(ID); }
    this.getValue = function(i)  { return this.polylines[i]; }
    this.getLastValue = function()  { return this.polylines[this.polylines.length-1]; }
    this.getValueById = function(ID)  {
                                        var i;
                                        for(i=0;i<this.polylinesID.length;i++)
                                        {
                                            if(this.polylinesID[i]==ID)
                                            {
                                               // alert('polyline found : '+this.polylines[i].value);
                                                return this.polylines[i];
                                            }
                                        }
                                        return null;
                                      }
  this.removeValueById = function(ID) {
                                        var i;
                                        for(i=0;i<this.polylinesID.length;i++)
                                        {
                                            if(this.polylinesID[i]==ID)
                                            {
                                                this.polylines.splice(i,1);
                                                this.polylinesID.splice(i,1);
                                            }
                                        }
                                        return null;
                                      }
}

function fPolygons()
{
    this.polygons = new Array();
    this.polygonsID = new Array();
    this.getLength = function() { return this.polygons.length; };
    this.pushValue = function(v,ID) {  this.polygons.push(v); this.polygonsID.push(ID); }
    this.getValue = function(i)  { return this.polygons[i]; }
    this.getLastValue = function()  { return this.polygons[this.polygons.length-1]; }
    this.getValueById = function(ID)  {
                                        var i;
                                        for(i=0;i<this.polygonsID.length;i++)
                                        {
                                            if(this.polygonsID[i]==ID)
                                            {
                                                return this.polygons[i];
                                            }
                                        } 
                                        return null;
                                      }
    this.removeValueById = function(ID)  {
                                        var i;
                                        for(i=0;i<this.polygonsID.length;i++)
                                        {
                                            if(this.polygonsID[i]==ID)
                                            {
                                                this.polygons.splice(i,1);
                                                this.polygonsID.splice(i,1);
                                            }
                                        } 
                                        return null; 
                                      }
}

if (GBrowserIsCompatible())
{
//debugger;
//GoogleMapForASPNet.OnSecondChange("Ghata");
map = new GMap2(document.getElementById("GoogleMap_Div"));

var markers = new fMarkers();
var polylines = new fPolylines();
var polygons = new fPolygons();
//var myEventListeners = new fListeners();
                
function CreateMarker(point,icon1,InfoHTML,bDraggable,sTitle)
{
    var marker;
//    if(icon!=null)
//    {
        marker = new GMarker(point,{icon:icon1,draggable:bDraggable,title: sTitle});
//    }
//    else
//    {
//        marker = new GMarker(point);
//    }
    if(InfoHTML!='')
    {
       // vlisteners.pushValue(GEvent.addListener(marker, "click", function() { map.openInfoWindowHtml(point,InfoHTML); }));
        GEvent.addListener(marker, "click", function() { map.openInfoWindowHtml(point,InfoHTML); });
        GEvent.addListener(marker, "dragend", function() {  GService.SetLatLon(this.value,this.getLatLng().y,this.getLatLng().x);RaiseEvent('PushpinMoved',this.value);  });
    }
    return marker;
}

function CreatePolyline(points,color,width,isgeodesic)
{
    var polyline;
    if(!isgeodesic)
    {
        polyline = new GPolyline(points,color,width);
    }
    else
    {
        var polyOptions = {geodesic:true};
        polyline = new GPolyline(points,color,width,1,polyOptions);
    }
    return polyline;
}

function CreatePolygon(points,strokecolor,strokeweight,strokeopacity,fillcolor,fillopacity)
{
    var polygon;
    
    var polygon = new GPolygon(points,strokecolor,strokeweight,strokeopacity,fillcolor,fillopacity);
    return polygon;
}

function fGetGoogleObject(result, userContext)
{
    map.setCenter(new GLatLng(result.CenterPoint.Latitude, result.CenterPoint.Longitude), result.ZoomLevel);
    
    if(result.ShowMapTypesControl)
    {
        map.addControl(new GMapTypeControl());
    }

    if(result.ShowZoomControl)
    {
        map.addControl(new GLargeMapControl());
    }
    
    var i;
    if(markers!=null)
    {
        for(i=0;i<markers.getLength();i++)
        {
            var cmark = markers.getValue(i);
            if(cmark !=null)
            {
                    map.removeOverlay(cmark);
            }
        }
    }
//    if(myEventListeners!=null)
//    {
//        for(i=0;i<myEventListeners.getLength();i++)
//        {
//            var lisnr = myEventListeners.getValue(i);
//            if(lisnr!=null)
//            {
//                GEvent.removeListener(lisnr);
//            }
//        }
//    }  
    markers = new fMarkers();
//    myEventListeners = new fListeners();

    for(i=0;i<result.Points.length;i++)
    {
        var myIcon_google;

        var myPoint = new GLatLng(result.Points[i].Latitude, result.Points[i].Longitude);
        
        myIcon_google = null;
        if(result.Points[i].IconImage!='')
        {
            myIcon_google = new GIcon(G_DEFAULT_ICON);
            markerOptions = { icon:myIcon_google };

            myIcon_google.iconSize = new GSize(result.Points[i].IconImageWidth,result.Points[i].IconImageHeight);
            myIcon_google.image = result.Points[i].IconImage;
        }
       
        var marker = CreateMarker(myPoint,myIcon_google,result.Points[i].InfoHTML,result.Points[i].Draggable,result.Points[i].ToolTip);
        marker.value = result.Points[i].ID;
        markers.pushValue(marker);
        map.addOverlay(markers.getLastValue());
    }
    //Add polylines
   // alert('adding polyline');

    polylines = new fPolylines();
    for(i=0;i<result.Polylines.length;i++)
    {
	 var polypoints = new Array();
	 var j;
	 for(j=0;j<result.Polylines[i].Points.length;j++)
 	 {
	 	polypoints.push(new GLatLng(result.Polylines[i].Points[j].Latitude, result.Polylines[i].Points[j].Longitude));
	 }
        var polyline = CreatePolyline(polypoints,result.Polylines[i].ColorCode,result.Polylines[i].Width,result.Polylines[i].Geodesic);
        polylines.pushValue(polyline,result.Polylines[i].ID);
        map.addOverlay(polylines.getLastValue());
    }
// var polypoints = new Array();
// polypoints.push(new GLatLng(43.65669, -79.44268));
// polypoints.push(new GLatLng(43.66619, -79.44268));
// var poly = CreatePolyline(polypoints,"#66FF00",10,true);
// map.addOverlay(poly);

// var polypoints = new Array();
// polypoints.push(new GLatLng(43.65669, -79.44268));
// polypoints.push(new GLatLng(43.66619, -79.44268));
// polypoints.push(new GLatLng(43.67619, -79.44268));
// var directions = new GDirections(map,document.getElementById("directions_canvas")); 
//Clear the mapa nd directions of any old information
//directions.clear();

//Load the map and directions from the specified waypoints
//directions.loadFromWaypoints(polypoints);


    polygons = new fPolygons();
    for(i=0;i<result.Polygons.length;i++)
    {
	 var polypoints = new Array();
	 var j;
	 for(j=0;j<result.Polygons[i].Points.length;j++)
 	 {
	 	polypoints.push(new GLatLng(result.Polygons[i].Points[j].Latitude, result.Polygons[i].Points[j].Longitude));
	 }
        var polygon = CreatePolygon(polypoints,result.Polygons[i].StrokeColor,result.Polygons[i].StrokeWeight,result.Polygons[i].StrokeOpacity,result.Polygons[i].FillColor,result.Polygons[i].FillOpacity);
        polygons.pushValue(polygon,result.Polygons[i].ID);
        map.addOverlay(polygons.getLastValue());
    }

    
    if(result.ShowTraffic)
    {
        trafficInfo = new GTrafficOverlay();
        map.addOverlay(trafficInfo);
    }
}
 GService.GetGoogleObject(fGetGoogleObject);
 
function fGetGoogleObjectOptimized(result, userContext)
{
    if(result.RecenterMap)
    {
        map.setCenter(new GLatLng(result.CenterPoint.Latitude, result.CenterPoint.Longitude), result.ZoomLevel);
        GService.RecenterMapComplete();
    }

    if(result.ShowTraffic)
    {
        trafficInfo = new GTrafficOverlay();
        map.addOverlay(trafficInfo);
    }
    else
    {
        if(trafficInfo!=null)
        {
            map.removeOverlay(trafficInfo);
            trafficInfo = null;
        }
    }

    var i;
    for(i=0;i<result.Points.length;i++)
    {
        //Create icon
        var myIcon_google;

        var myPoint = new GLatLng(result.Points[i].Latitude, result.Points[i].Longitude);
        
        myIcon_google = null;
        if(result.Points[i].IconImage!='')
        {
            myIcon_google = new GIcon(G_DEFAULT_ICON);
            markerOptions = { icon:myIcon_google };

            myIcon_google.iconSize = new GSize(result.Points[i].IconImageWidth,result.Points[i].IconImageHeight);
            myIcon_google.image = result.Points[i].IconImage;
        }
        //Existing marker, but changed.
        if(result.Points[i].PointStatus=='C')
        {
            var marker = markers.getValueById(result.Points[i].ID);
            if(marker!=null)
            {
                markers.removeValueById(result.Points[i].ID);
                map.removeOverlay(marker);
            }
            var marker = CreateMarker(myPoint,myIcon_google,result.Points[i].InfoHTML,result.Points[i].Draggable,result.Points[i].ToolTip);
            marker.value = result.Points[i].ID;
            markers.pushValue(marker);
            map.addOverlay(markers.getLastValue());
        }
        //New Marker
        if(result.Points[i].PointStatus=='N')
        {
            var marker = CreateMarker(myPoint,myIcon_google,result.Points[i].InfoHTML,result.Points[i].Draggable,result.Points[i].ToolTip);
            marker.value = result.Points[i].ID;
            markers.pushValue(marker);
            map.addOverlay(markers.getLastValue());
        }
        //Existing marker, but deleted.
        if(result.Points[i].PointStatus=='D')
        {
            var marker = markers.getValueById(result.Points[i].ID);
            if(marker!=null)
            {
                markers.removeValueById(result.Points[i].ID);
                map.removeOverlay(marker);
            }
        }
    }
    
    //Get Polylines
    for(i=0;i<result.Polylines.length;i++)
    {
        //Existing marker, but changed.
        
        if(result.Polylines[i].LineStatus=='C')
        {
        
            var polyline = polylines.getValueById(result.Polylines[i].ID);
            if(polyline!=null)
            {
                polylines.removeValueById(result.Polylines[i].ID);
                map.removeOverlay(polyline);
            }
	        var polypoints = new Array();
	        var j;
	        for(j=0;j<result.Polylines[i].Points.length;j++)
 	        {
	 	        polypoints.push(new GLatLng(result.Polylines[i].Points[j].Latitude, result.Polylines[i].Points[j].Longitude));
	        }
            var polyline = CreatePolyline(polypoints,result.Polylines[i].ColorCode,result.Polylines[i].Width,result.Polylines[i].Geodesic);
            polylines.pushValue(polyline,result.Polylines[i].ID);
            map.addOverlay(polylines.getLastValue());
        }
        //New Marker

        if(result.Polylines[i].LineStatus=='N')
        {
	        var polypoints = new Array();
	        var j;
	        for(j=0;j<result.Polylines[i].Points.length;j++)
 	        {
	 	        polypoints.push(new GLatLng(result.Polylines[i].Points[j].Latitude, result.Polylines[i].Points[j].Longitude));
	        }
            var polyline = CreatePolyline(polypoints,result.Polylines[i].ColorCode,result.Polylines[i].Width,result.Polylines[i].Geodesic);
            polylines.pushValue(polyline,result.Polylines[i].ID);
            map.addOverlay(polylines.getLastValue());
        }
        //Existing marker, but deleted.
        if(result.Polylines[i].LineStatus=='D')
        {
            var polyline = polylines.getValueById(result.Polylines[i].ID);
            if(polyline!=null)
            {
                polylines.removeValueById(result.Polylines[i].ID);
                map.removeOverlay(polyline);
            }
        }
    }
    
        //Get Polygons
    for(i=0;i<result.Polygons.length;i++)
    {
        //Existing marker, but changed.

        if(result.Polygons[i].Status=='C')
        {
        
            var polygon = polygons.getValueById(result.Polygons[i].ID);
            if(polygon!=null)
            {
                polygons.removeValueById(result.Polygons[i].ID);
                map.removeOverlay(polygon);
            }
	        var polypoints = new Array();
	        var j;
	        for(j=0;j<result.Polygons[i].Points.length;j++)
 	        {
	 	        polypoints.push(new GLatLng(result.Polygons[i].Points[j].Latitude, result.Polygons[i].Points[j].Longitude));
	        }
            var polygon = CreatePolygon(polypoints,result.Polygons[i].StrokeColor,result.Polygons[i].StrokeWeight,result.Polygons[i].StrokeOpacity,result.Polygons[i].FillColor,result.Polygons[i].FillOpacity);
            polygons.pushValue(polygon,result.Polygons[i].ID);
            map.addOverlay(polygons.getLastValue());
        }
        //New Marker

        if(result.Polygons[i].Status=='N')
        {
	        var polypoints = new Array();
	        var j;
	        for(j=0;j<result.Polygons[i].Points.length;j++)
 	        {
	 	        polypoints.push(new GLatLng(result.Polygons[i].Points[j].Latitude, result.Polygons[i].Points[j].Longitude));
	        }
            var polygon = CreatePolygon(polypoints,result.Polygons[i].StrokeColor,result.Polygons[i].StrokeWeight,result.Polygons[i].StrokeOpacity,result.Polygons[i].FillColor,result.Polygons[i].FillOpacity);
            polygons.pushValue(polygon,result.Polygons[i].ID);
            map.addOverlay(polygons.getLastValue());
        }
        //Existing marker, but deleted.
        if(result.Polygons[i].Status=='D')
        {
            var polygon = polygons.getValueById(result.Polygons[i].ID);
            if(polygon!=null)
            {
                polygons.removeValueById(result.Polygons[i].ID);
                map.removeOverlay(polygon);
            }
        }
    }
}

}
function endRequestHandler(sender, args)
    {
    //alert('hi');
        GService.GetOptimizedGoogleObject(fGetGoogleObjectOptimized);
    }
   function pageLoad()
    {
        if(!Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack())
            Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);
    }    
</script>


                </div>
                
            </div>
        </div>
        <!-- Right Container Part Start Here -->
        <div id="InnerContainerRight">
            <div class="RightLinkBox">
                <a href="#" class="RightLinks">Country profile</a><a href="#" class="RightLinks">Beneficiaries</a>
                <div class="Clr">
                </div>
                <a href="#" class="RightLinkssml">Donors</a><a href="#" class="RightLinkssml">Partners</a><a
                    href="#" class="RightLinkssml">Media</a>
                <div class="Clr">
                </div>
                <a href="#" class="RightLinks">EPIC App x</a><a href="#" class="RightLinks">EPIC App
                    y</a>
                <div class="Clr">
                </div>
                <a href="#" class="RightLinks">WFP EP web</a><a href="#" class="RightLinks">WFP Log
                    cluster</a>
                <div class="Clr">
                </div>
                <a href="#" class="RightLinksbig">EPIC countries and release strategy</a>
                <div class="Clr">
                </div>
            </div>
            <div>
                

<style type="text/css">
.resizer img{height:200px; width:245px; border:5px solid #B5B5B5 !important;}
</style>
<table border="0" cellspacing="0" cellpadding="0" id="header" width="100%">
    <tr>
        
        
    </tr>
    
</table>




            </div>
        </div>
        <!-- Right Container Part End Here -->
        <div class="Clr">
        </div>
    </div>

            </div>
        </div>
        <!-- Content Part End Here -->
        <!-- Footer Part Start Here -->
        
<div id="Footer">
    <div class="FooterBox">
        <div class="FootLogo">
            <img src="images/footer-logo.gif" alt="EPIC" width="36" height="43">Copyright 2010 &copy; World Food Program<br>
             </div>
        <div class="FootLinks">
            <ul>
                <li><a href="Epic.aspx">EPIC</a></li>
                <li><a href="SuccessStoriesList.aspx">Success Stories</a></li>
                <li><a href="Login.aspx" id="ctl00_ucFront2_ankSignIn" class="SignIn">Sign-in</a>               
                     </li> 
                
                <li><a href="Countries.aspx">Countries</a></li>                
                <li><a href="Feedback.aspx">Feedback</a></li>
                <li><a href="Contact.aspx">Contact Us</a></li>
                  
                <li><a href="Appstore.aspx">App Store</a></li>
                <li><a href="PressRelease-Category-List.aspx">Press Release</a></li>
                <li><a href="WFPResourceLinks.aspx">WFP Resource Links</a></li>   
                
                                   
                <li><a href="support-training.aspx">Support &amp; Training</a></li> 
                <li><a href="photogallery.aspx">Photo Gallery</a></li>
                <li><a href="Privacy.aspx"> Privacy Policy</a></li>
                 
               
                <li><a href="News-Category-List.aspx">News </a></li>
                <li><a href="Video-CategoryList.aspx">Video Gallery</a></li> 
                <li><a href="Sitemap.aspx">Sitemap</a></li>  
                
                <li><a href="Partners.aspx">Partners</a></li>
                <li><a href="Event-Category-List.aspx">Events</a></li>
                <li>&nbsp;</li>
                
                <li><a href="About.aspx">About</a></li>   
               
            </ul>
        </div>
        <div class="FootRight">
            <strong>Find EPIC on</strong> <a href="http://www.facebook.com/"  target="_blank" title="Facebook">
                <img src="images/facebook-icon.gif" alt="Facebook" width="26" height="26" border="0"></a>
            <a href="http://twitter.com/"  target="_blank" title="Twitter">
                <img src="images/twitter-icon.gif" alt="Twitter" width="26" height="26" border="0"></a>
            <a href="http://www.youtube.com/" target="_blank" title="You Tube">
                <img src="images/utube-icon.gif" alt="You Tube" width="26" height="26" border="0"></a>
            <a href="RSS-Main.aspx" title="RSS Feeds">
                <img src="images/rss-icon.gif" alt="RSS Feeds" width="26" height="26" border="0"></a>
        </div>
    </div>
</div>

        <!-- Footer Part End Here -->
    </div>
    
<script type="text/javascript">
//<![CDATA[
var Page_Validators =  new Array(document.getElementById("ctl00_ucFront1_RFVSearch"), document.getElementById("ctl00_ucFront1_rfvUserName"), document.getElementById("ctl00_ucFront1_REVEmail"), document.getElementById("ctl00_ucFront1_rfvPassword"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
var ctl00_ucFront1_RFVSearch = document.all ? document.all["ctl00_ucFront1_RFVSearch"] : document.getElementById("ctl00_ucFront1_RFVSearch");
ctl00_ucFront1_RFVSearch.controltovalidate = "ctl00_ucFront1_txtKeyword";
ctl00_ucFront1_RFVSearch.errormessage = "Please enter keyword.";
ctl00_ucFront1_RFVSearch.display = "Dynamic";
ctl00_ucFront1_RFVSearch.validationGroup = "SiteSearch";
ctl00_ucFront1_RFVSearch.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ucFront1_RFVSearch.initialvalue = "";
var ctl00_ucFront1_rfvUserName = document.all ? document.all["ctl00_ucFront1_rfvUserName"] : document.getElementById("ctl00_ucFront1_rfvUserName");
ctl00_ucFront1_rfvUserName.controltovalidate = "ctl00_ucFront1_txtUserName";
ctl00_ucFront1_rfvUserName.errormessage = "Please enter your email id !";
ctl00_ucFront1_rfvUserName.display = "Dynamic";
ctl00_ucFront1_rfvUserName.validationGroup = "SignIn";
ctl00_ucFront1_rfvUserName.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ucFront1_rfvUserName.initialvalue = "";
var ctl00_ucFront1_REVEmail = document.all ? document.all["ctl00_ucFront1_REVEmail"] : document.getElementById("ctl00_ucFront1_REVEmail");
ctl00_ucFront1_REVEmail.controltovalidate = "ctl00_ucFront1_txtUserName";
ctl00_ucFront1_REVEmail.errormessage = "Please enter a valid email id eg. xyz@abc.com !";
ctl00_ucFront1_REVEmail.display = "Dynamic";
ctl00_ucFront1_REVEmail.validationGroup = "SignIn";
ctl00_ucFront1_REVEmail.evaluationfunction = "RegularExpressionValidatorEvaluateIsValid";
ctl00_ucFront1_REVEmail.validationexpression = "\\w+([-+.\']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*";
var ctl00_ucFront1_rfvPassword = document.all ? document.all["ctl00_ucFront1_rfvPassword"] : document.getElementById("ctl00_ucFront1_rfvPassword");
ctl00_ucFront1_rfvPassword.controltovalidate = "ctl00_ucFront1_txtPassword";
ctl00_ucFront1_rfvPassword.errormessage = "Please enter your password !";
ctl00_ucFront1_rfvPassword.display = "Dynamic";
ctl00_ucFront1_rfvPassword.validationGroup = "SignIn";
ctl00_ucFront1_rfvPassword.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_ucFront1_rfvPassword.initialvalue = "";
//]]>
</script>


<script type="text/javascript">
//<![CDATA[

var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        ;(function() {var fn = function() {AjaxControlToolkit.ModalPopupBehavior.invokeViaServer('SignInId', false); Sys.Application.remove_load(fn);};Sys.Application.add_load(fn);})();Sys.Application.initialize();

document.getElementById('ctl00_ucFront1_RFVSearch').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_ucFront1_RFVSearch'));
}

document.getElementById('ctl00_ucFront1_rfvUserName').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_ucFront1_rfvUserName'));
}

document.getElementById('ctl00_ucFront1_REVEmail').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_ucFront1_REVEmail'));
}

document.getElementById('ctl00_ucFront1_rfvPassword').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_ucFront1_rfvPassword'));
}
Sys.Application.add_init(function() {
    $create(AjaxControlToolkit.ModalPopupBehavior, {"BackgroundCssClass":"modalBackground","CancelControlID":"AnkSignInClose","OnCancelScript":"HideModalPopupSignIn()","PopupControlID":"ctl00_ucFront1_PnlSignIn","dynamicServicePath":"/countries.aspx","id":"SignInId"}, null, null, $get("ctl00_ucFront1_btnSignIn"));
});
Sys.Application.add_init(function() {
    $create(AjaxControlToolkit.ModalPopupBehavior, {"BackgroundCssClass":"modalBackground","DropShadow":true,"PopupControlID":"ctl00_pnlProgress","dynamicServicePath":"/countries.aspx","id":"ctl00_mpeProgress"}, null, null, $get("ctl00_pnlProgress"));
});
//]]>
</script>
</form>
    

    <script type="text/javascript">

        Sys.Net.WebRequestManager.add_invokingRequest(onInvoke);
        Sys.Net.WebRequestManager.add_completedRequest(onComplete);

        function onInvoke(sender, args)
        {
            $find('ctl00_mpeProgress').show();
        }

        function onComplete(sender, args)
        {
            try{
                $find('ctl00_mpeProgress').hide();
            }
            catch(err){}
        }
        function pageUnload()
        {
            Sys.Net.WebRequestManager.remove_invokingRequest(onInvoke);
            Sys.Net.WebRequestManager.remove_completedRequest(onComplete);
        }

    </script>

    
</body>
</html>
